<link rel="import" href="../components/polymer/polymer.html">
<link rel="import" href="../components/iron-flex-layout/classes/iron-flex-layout.html">
<link rel="import" href="../components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../components/iron-icons/iron-icons.html">

<dom-module id="lfg-subscription">
    <link rel="stylesheet" href="../components/paper-styles/paper-styles.html">

    <style>
        :host {
            display: flex;
            justify-content: space-between;
            background-color: var(--nodecg-info-color);
            color: white;
            align-items: center;
        }

        :host:first-child:not(:last-child) {
            border-bottom: 1px solid white;
        }

        :host:not(:last-child) {
            border-bottom: 1px solid white;
        }

        :host.resub {
            background-color: var(--nodecg-info-color--dark);
        }

        :host > div:first-child{
            white-space: nowrap;
            flex-grow: 1;
            text-overflow: ellipsis;
            overflow: hidden;
        }

        #body {
            padding: 0 12px;
        }

        #remove {
            padding: 2px;
            flex-shrink: 0;
            color: white;
            width: 30px;
            height: 30px;
        }

        #remove:hover {
            background: var(--paper-red-50);
            border-radius: 50%;
        }
    </style>

    <template>
        <div id="body" title="[[body]]">[[body]]</div>
        <paper-icon-button id="remove" on-click="removeSelf" icon="clear" title="Remove"></paper-icon-button>
    </template>
</dom-module>

<script>
(function() {
    window.LfgSubscription = Polymer({
        is: 'lfg-subscription',
        properties: {
            name: {
                type: String,
                observer: '_calcBody'
            },
            resub: {
                type: Boolean,
                observer: '_calcBody'
            },
            months: {
                type: Boolean,
                observer: '_calcBody'
            }
        },

        _calcBody: function() {
            if (this.resub) {
                this.body = this.name + ' Ã—' + this.months;
                this.classList.add('resub');
            } else {
                this.body = this.name;
                this.classList.remove('resub');
            }
        },

        removeSelf: function() {
            this.parentNode.removeChild(this);
        }
    });
})();
</script>
